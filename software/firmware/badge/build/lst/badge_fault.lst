ARM GAS  /tmp//cciHgEsA.s 			page 1


   1              	# 1 "badge_fault.S"
   1              	/*-
   1              	×Ý­
   0              	
   0              	
   2              	 * Copyright (c) 2019
   3              	 *      Bill Paul <wpaul@windriver.com>.  All rights reserved.
   4              	 *
   5              	 * Redistribution and use in source and binary forms, with or without
   6              	 * modification, are permitted provided that the following conditions
   7              	 * are met:
   8              	 * 1. Redistributions of source code must retain the above copyright
   9              	 *    notice, this list of conditions and the following disclaimer.
  10              	 * 2. Redistributions in binary form must reproduce the above copyright
  11              	 *    notice, this list of conditions and the following disclaimer in the
  12              	 *    documentation and/or other materials provided with the distribution.
  13              	 * 3. All advertising materials mentioning features or use of this software
  14              	 *    must display the following acknowledgement:
  15              	 *      This product includes software developed by Bill Paul.
  16              	 * 4. Neither the name of the author nor the names of any co-contributors
  17              	 *    may be used to endorse or promote products derived from this software
  18              	 *    without specific prior written permission.
  19              	 *
  20              	 * THIS SOFTWARE IS PROVIDED BY Bill Paul AND CONTRIBUTORS ``AS IS'' AND
  21              	 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  22              	 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  23              	 * ARE DISCLAIMED.  IN NO EVENT SHALL Bill Paul OR THE VOICES IN HIS HEAD
  24              	 * BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
  25              	 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
  26              	 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  27              	 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  28              	 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
  29              	 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF
  30              	 * THE POSSIBILITY OF SUCH DAMAGE.
  31              	 */
  32              	
  33              		.cpu		cortex-m4
  34              	
  35              		.fpu		fpv4-sp-d16
  36              	
  37              		.thumb
  38              		.thumb_func
  39              	
  40              		.file		"badge_fault.S"
  41              		.text
  42              	
  43              		.section	.text,"ax",%progbits
  44              		.align		1
  45              		.code		16 
  46              		.arch		armv7e-m
  47              		.syntax		unified
  48              	
  49              		.type		HardFault_Handler, %function
  50              		.type		BusFault_Handler, %function
  51              		.type		UsageFault_Handler, %function
  52              		.type		MemManage_Handler, %function
  53              	
ARM GAS  /tmp//cciHgEsA.s 			page 2


  54              		.globl		HardFault_Handler
  55              		.globl		BusFault_Handler
  56              		.globl		UsageFault_Handler
  57              		.globl		MemManage_Handler
  58              	
  59              	CommonFault_Handler:
  60              		/*
  61              		 * Test the link register to see if we got here
  62              		 * from thread mode or handler mode. If thread mode,
  63              		 * then switch to using the PSP as the current stack.
  64              		 */
  65 0000 11F0040F 		tst	r1, #4
  66 0004 0CBF     		ite	eq
  67 0006 EFF30882 		mrseq	r2, msp
  68 000a EFF30982 		mrsne	r2, psp
  69 000e FFF7FEFF 		bl	trapHandle
  70              	
  71              	HardFault_Handler:
  72 0012 4FF00000 		mov	r0, #0
  73 0016 7146     		mov	r1, lr
  74 0018 FFF7F2FF 		bl	CommonFault_Handler
  75              	
  76              	BusFault_Handler:
  77 001c 4FF00100 		mov	r0, #1
  78 0020 7146     		mov	r1, lr
  79 0022 FFF7EDFF 		bl	CommonFault_Handler
  80              	
  81              	UsageFault_Handler:
  82 0026 4FF00200 		mov	r0, #2
  83 002a 7146     		mov	r1, lr
  84 002c FFF7E8FF 		bl	CommonFault_Handler
  85              	
  86              	MemManage_Handler:
  87 0030 4FF00300 		mov	r0, #3
  88 0034 7146     		mov	r1, lr
  89 0036 FFF7E3FF 		bl	CommonFault_Handler
ARM GAS  /tmp//cciHgEsA.s 			page 3


DEFINED SYMBOLS
                            *ABS*:0000000000000000 badge_fault.S
       badge_fault.S:44     .text:0000000000000000 $t
       badge_fault.S:71     .text:0000000000000012 HardFault_Handler
       badge_fault.S:76     .text:000000000000001c BusFault_Handler
       badge_fault.S:81     .text:0000000000000026 UsageFault_Handler
       badge_fault.S:86     .text:0000000000000030 MemManage_Handler
       badge_fault.S:59     .text:0000000000000000 CommonFault_Handler

UNDEFINED SYMBOLS
trapHandle
